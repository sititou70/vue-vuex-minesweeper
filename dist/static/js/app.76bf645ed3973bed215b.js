webpackJsonp([1],{33:function(t,e,n){"use strict";var o=n(22),r=n.n(o),i=n(20),u=n(19),a=n(41);i.a.use(u.b);var s={state:{button:null,active_id:null},getters:{mouse_info:function(t){return{button:t.button,active_id:t.active_id}}},actions:{mouseup:function(t,e){t.getters.game_over||t.getters.game_clear||null!==t.state.button&&(0===t.state.button&&t.dispatch("openCell",e.id),2===t.state.button&&t.dispatch("toggleFlag",e.id),3===t.state.button&&t.dispatch("superOpen",e.id),t.state.button=null)},mousedown:function(t,e){if(1==e.e.button)return null;null==t.state.button?t.state.button=e.e.button:t.state.button=3},mouseenter:function(t,e){t.state.active_id=e.id}}},c={state:{modes:{easy:{width:8,height:8,mine_num:10},normal:{width:16,height:16,mine_num:40},hard:{width:30,height:16,mine_num:99},very_hard:{width:48,height:24,mine_num:256},mania:{width:64,height:48,mine_num:777}},mode:"normal",mines:[],flags:[],opened:[],num_board:[]},getters:{game_over:function(t){return n.i(a.a)(t)},game_clear:function(t){return n.i(a.b)(t)},board_info:function(t){return t.modes[t.mode]},around_mine_num:function(t,e){return function(o){return null===t.num_board[o]&&(t.num_board[o]=n.i(a.c)(t.mines,o,t,e)),t.num_board[o]}},flag_num:function(t){return t.flags.reduce(function(t,e){return t+(e?1:0)},0)}},mutations:{initGame:function(t,e){t.mode=e,t.mines=n.i(a.d)(t.modes[e]),t.flags=n.i(a.e)(t.modes[e]),t.opened=n.i(a.e)(t.modes[e]),t.num_board=n.i(a.f)(t.modes[e])}},actions:{openCell:function(t,e){if(!t.state.flags[e]){var o=n.i(a.g)(e,t.getters.board_info.width);t.state.opened=n.i(a.h)(o,t.state.opened,t.getters)}},toggleFlag:function(t,e){if(!t.state.opened[e]){var n=[].concat(r()(t.state.flags));n[e]=!n[e],t.state.flags=n}},superOpen:function(t,e){t.state.flags[e]||n.i(a.i)(e,t)}}};e.a=new u.b.Store({modules:{Mouse:s,Game:c}})},34:function(t,e,n){function o(t){n(81)}var r=n(2)(n(35),n(92),o,null,null);t.exports=r.exports},35:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(86),r=n.n(o),i=n(84),u=n.n(i);e.default={name:"app",components:{InfoHeader:r.a,Board:u.a},computed:{mode:function(){return this.$store._modules.root._children.Game.state.mode}}}},36:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(85),r=n.n(o);e.default={data:function(){return{name:"init_button"}},computed:{numBoard:function(){return this.$store._modules.root._children.Game.state.mines}},components:{BoardButton:r.a}}},37:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(45),r=n.n(o),i=n(19);e.default={data:function(){return{name:"board_button"}},props:["id"],computed:{button_state:function(){return this.$store.getters.game_over&&this.$store.state.Game.mines[this.id]?"mine":this.$store.state.Game.flags[this.id]?"flag":this.$store.state.Game.opened[this.id]?this.$store.state.Game.mines[this.id]?"mine":this.$store.getters.around_mine_num(this.id):"normal"}},methods:r()({},n.i(i.a)(["mouseup","mousedown","mouseenter"]))}},38:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(n(19),n(87)),r=n.n(o),i=n(88),u=n.n(i);e.default={name:"info_header",computed:{remain_mine_num:function(){return this.$store.getters.board_info.mine_num-this.$store.getters.flag_num}},components:{InitButton:r.a,ModeSelector:u.a}}},39:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{name:"init_button"}},computed:{button_state:function(){return this.$store.getters.game_clear?"gameclear":this.$store.getters.game_over?"gameover":"normal"}},methods:{click:function(){this.$store.commit("initGame",this.$store._modules.root._children.Game.state.mode)}}}},40:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(44),r=n.n(o);e.default={data:function(){return{name:"mode_selector"}},computed:{modes:function(){return r()(this.$store._modules.root._children.Game.state.modes)},mode:function(){return this.$store._modules.root._children.Game.state.mode}},methods:{change:function(t){this.$store.commit("initGame",t)}}}},41:function(t,e,n){"use strict";n.d(e,"g",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return h}),n.d(e,"a",function(){return p}),n.d(e,"b",function(){return g}),n.d(e,"c",function(){return v}),n.d(e,"h",function(){return b}),n.d(e,"i",function(){return x});var o=n(22),r=n.n(o),i=n(21),u=n.n(i),a=u()({length:9},function(t,e){return{dx:parseInt(e/3)-1,dy:e%3-1}}).filter(function(t){return!(0===t.dx&&0===t.dy)}),s=function(t,e,n,o){return e<0||n<0||e>=o.width||n>=o.height?null:t[n*o.width+e]},c=function(t,e){return{x:t%e,y:Math.floor(t/e)}},d=function(t,e){return t.y*e+t.x},f=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*e),o=t[e];t[e]=t[n],t[n]=o}return t},m=function(t){return t.reduce(function(t,e){return t+(e?1:0)},0)},l=function(t){return f(u()({length:t.width*t.height},function(e,n){return n<t.mine_num}))},_=function(t){return f(u()({length:t.width*t.height},function(){return!1}))},h=function(t){return f(u()({length:t.width*t.height},function(){return null}))},p=function(t){for(var e=0;e<t.mines.length;e++)if(t.mines[e]&&t.opened[e])return!0;return!1},g=function(t){return t.modes[t.mode].width*t.modes[t.mode].height-t.modes[t.mode].mine_num===m(t.opened)},v=function(t,e,n,o){if(n.mines[e])return null;var r=c(e,o.board_info.width);return a.map(function(e){return s(t,r.x+e.dx,r.y+e.dy,o.board_info)}).map(function(t){return null===t?0:t}).reduce(function(t,e){return t+e})},b=function t(e,n,o){var i=o.board_info,u=d(e,i.width);if(e.x<0||e.y<0||e.x>=i.width||e.y>=i.height)return n;if(n[u])return n;var s=[].concat(r()(n));return s[u]=!0,0===o.around_mine_num(u)&&a.forEach(function(e){var n=c(u,i.width);n.x+=e.dx,n.y+=e.dy,s=t(n,s,o)}),s},x=function(t,e){if(e.getters.around_mine_num(t)===v(e.state.flags,t,e.state,e.getters)){var n=c(t,e.getters.board_info.width);a.forEach(function(t){var o={x:n.x+t.dx,y:n.y+t.dy};s(e.state.flags,o.x,o.y,e.getters.board_info)||(e.state.opened=b(o,e.state.opened,e.getters))})}}},42:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),r=n(34),i=n.n(r),u=n(33);o.a.config.productionTip=!1,new o.a({el:"#app",store:u.a,template:"<App/>",components:{App:i.a}}),u.a.commit("initGame","normal"),document.addEventListener("contextmenu",function(t){t.preventDefault()},!1)},78:function(t,e){},79:function(t,e){},80:function(t,e){},81:function(t,e){},82:function(t,e){},83:function(t,e){},84:function(t,e,n){function o(t){n(79)}var r=n(2)(n(36),n(90),o,"data-v-01cd0f12",null);t.exports=r.exports},85:function(t,e,n){function o(t){n(78)}var r=n(2)(n(37),n(89),o,"data-v-01c86f89",null);t.exports=r.exports},86:function(t,e,n){function o(t){n(82)}var r=n(2)(n(38),n(93),o,"data-v-408040cc",null);t.exports=r.exports},87:function(t,e,n){function o(t){n(83)}var r=n(2)(n(39),n(94),o,"data-v-7eccb7a1",null);t.exports=r.exports},88:function(t,e,n){function o(t){n(80)}var r=n(2)(n(40),n(91),o,"data-v-2b3a9c21",null);t.exports=r.exports},89:function(t,e){t.exports={render:function(){var t=this,e=this,n=e.$createElement;return(e._self._c||n)("button",{staticClass:"board_button",class:"is-"+e.button_state,attrs:{type:"button",name:"button"},on:{mouseup:function(n){return e.mouseup({e:n,id:t.id})},mousedown:function(n){return e.mousedown({e:n,id:t.id})},mouseenter:function(n){return e.mouseenter({e:n,id:t.id})}}})},staticRenderFns:[]}},90:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board"},t._l(t.numBoard,function(t,e){return n("BoardButton",{key:e,attrs:{id:e}})}))},staticRenderFns:[]}},91:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{staticClass:"mode_selector",on:{change:function(e){t.change(e.target.value)}}},t._l(t.modes,function(e){return n("option",{domProps:{value:e,selected:t.mode===e}},[t._v(t._s(e))])}))},staticRenderFns:[]}},92:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"is-"+t.mode,attrs:{id:"app"}},[n("InfoHeader"),t._v(" "),n("Board")],1)},staticRenderFns:[]}},93:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info_header"},[n("span",{staticClass:"mine_info"},[t._v(t._s(t.remain_mine_num))]),t._v(" "),n("InitButton"),t._v(" "),n("ModeSelector",{staticClass:"mode_selector"})],1)},staticRenderFns:[]}},94:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"init_button",class:"is-"+t.button_state,attrs:{type:"button",name:"button"},on:{click:t.click}})},staticRenderFns:[]}}},[42]);
//# sourceMappingURL=app.76bf645ed3973bed215b.js.map